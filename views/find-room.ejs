<%- include( 'partials/header.ejs' ) %>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->
    <div class="container js-content">
      <div class="logo-container">
        <img src="/images/treasure-dash-logo.svg" alt="Treasure Dash logo" class="logo-container__logo">
        <h1 class="heading-primary heading-primary--logo">Treasure Dash</h1>
      </div>
      <% if (notice) { %>
          <div class="notice notice--error">
            <% if (notice == 'not-found') { %>
              Room either doesn't exist or is full.
            <% } %>
          </div>
      <% } %>
      <div class="block js-enter-name">
        <form action="#" class="single-row-form js-enter-name-form">
          <p>Please enter your name:</p>
          <input class="single-row-form__input js-name-input" type="text" maxlength="14" required>
          <input type="submit" class="button" value="Find a game">
        </form>
      </div>
      <div class="block block--hidden js-rooms-list-block">
        <h2>Rooms</h2>
        <div class="room-list js-rooms-list">
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Players</th>
              </tr>
            </thead>
            <tbody>
              <% rooms.sort((a, b) => a.name.localeCompare(b.name)).forEach(function(room) { %>
              <tr>
                <td><a href="/game/<%= room.name.toLowerCase() %>"><%= room.name %></a></td>
                <td><%= room.users.length %></td>
              </tr>
              <% }); %>
            </tbody>
          </table>
        </div>
        <div class="buttons-row clearfix">
          <button class="js-refresh-rooms-btn button button--refresh" aria-label="Refresh" title="Refresh"></button>
          <button class="js-open-modal-btn js-create-room button" data-associated-modal-id="create-room-modal">Create room</button>
        </div>
      </div>
    </div>
    <button class="rules__btn js-open-modal-btn js-open-rules-modal-btn" data-associated-modal-id="rules-modal">Rules</button>
    <div class="modal js-modal js-create-room-modal" data-modal-id="create-room-modal">
      <div class="modal__inner">
        <button class="modal__close-btn js-close-modal-btn" title="Close modal">
          <!-- Generated by IcoMoon.io -->
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
            <path d="M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z"></path>
          </svg>  
        </button>
        <h2 class="modal__heading js-modal-content">Create Room</h2>
        <div class='notice notice--error js-error-notice' style="display: none"></div>
        <form action="#" class="single-row-form js-create-room-form">
          <p>Enter your room name:</p>
          <input class="single-row-form__input js-room-name-input" name="room-name" type="text" required>
          <input type="submit" class="button" value="Create">
        </form>
      </div>
    </div>
    <%- include( 'partials/rules-modal.ejs' ) %>
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous">
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="scripts/find-room.js" async defer></script>
    <script src="../scripts/modals.js" async defer></script>
  </body>
  <%- include( 'partials/footer.ejs' ) %>